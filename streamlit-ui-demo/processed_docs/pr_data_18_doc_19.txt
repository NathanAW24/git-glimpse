Pull Request Number: 1901
Title: fix(input): label position and styles
Base Branch: main
Head Branch: fix/outside-input-select-color
Author: jrgarciadev
URL: https://github.com/nextui-org/nextui/pull/1901
State: MERGED
Created At: 2023-11-06T18:23:10Z
Merged At: 2023-11-06T18:45:05Z
Participants: jrgarciadev

Description:
Closes # 
üìù Description
Fixes the Input and Select styles.
‚õ≥Ô∏è Current behavior (updates)
Input/Select/Autocomplete

üöÄ New behavior
Styles issues fixed.

üí£ Is this a breaking change (Yes/No): No

üìù Additional Information

Commits:
- fix(input): label position and styles\n- fix(textarea): invalid state\n

Labels:


Comments:
- changeset-bot: ###  ü¶ã  Changeset detected

Latest commit: 5745a5dccecb66146e757b97d46cda527e4a0585

**The changes in this PR will be included in the next version bump.**

<details><summary>This PR includes changesets to release 5 packages</summary>

  | Name                     | Type  |
| ------------------------ | ----- |
| @nextui-org/select       | Patch |
| @nextui-org/input        | Patch |
| @nextui-org/theme        | Patch |
| @nextui-org/react        | Patch |
| @nextui-org/autocomplete | Patch |

</details>

Not sure what this means? [Click here  to learn what changesets are](https://github.com/changesets/changesets/blob/main/docs/adding-a-changeset.md).

[Click here if you're a maintainer who wants to add another changeset to this PR](https://github.com/nextui-org/nextui/new/fix/outside-input-select-color?filename=.changeset/red-dingos-compete.md&value=---%0A%22%40nextui-org%2Finput%22%3A%20patch%0A%22%40nextui-org%2Fselect%22%3A%20patch%0A%22%40nextui-org%2Ftheme%22%3A%20patch%0A---%0A%0Afix(input)%3A%20label%20position%20and%20styles%0A)

\n- vercel: [vc]: #rsgtJeXHmARfRnNOXc/1ZlBJtABoM1RhJkTt3Zu/NDc=:eyJpc01vbm9yZXBvIjp0cnVlLCJ0eXBlIjoiZ2l0aHViIiwicHJvamVjdHMiOlt7Im5hbWUiOiJuZXh0dWktZG9jcy12MiIsInJvb3REaXJlY3RvcnkiOiJhcHBzL2RvY3MiLCJpbnNwZWN0b3JVcmwiOiJodHRwczovL3ZlcmNlbC5jb20vbmV4dHVpLW9yZy9uZXh0dWktZG9jcy12Mi9DY2hVWEh2cEh1UDFjZnF6NTJnb1NMRlBQMlczIiwicHJldmlld1VybCI6Im5leHR1aS1kb2NzLXYyLWdpdC1maXgtb3V0c2lkZS1pbnB1dC1zZWxlY3QtY29sb3ItbmV4dHVpLW9yZy52ZXJjZWwuYXBwIiwibmV4dENvbW1pdFN0YXR1cyI6IkRFUExPWUVEIiwibGl2ZUZlZWRiYWNrIjp7InJlc29sdmVkIjowLCJ1bnJlc29sdmVkIjowLCJ0b3RhbCI6MCwibGluayI6Im5leHR1aS1kb2NzLXYyLWdpdC1maXgtb3V0c2lkZS1pbnB1dC1zZWxlY3QtY29sb3ItbmV4dHVpLW9yZy52ZXJjZWwuYXBwIn19LHsibmFtZSI6Im5leHR1aS1zdG9yeWJvb2stdjIiLCJyb290RGlyZWN0b3J5IjoicGFja2FnZXMvc3Rvcnlib29rIiwiaW5zcGVjdG9yVXJsIjoiaHR0cHM6Ly92ZXJjZWwuY29tL25leHR1aS1vcmcvbmV4dHVpLXN0b3J5Ym9vay12Mi9weFFtZHZ5VFlKWnhWZXczYmtMQ1lhNXNIVDNTIiwicHJldmlld1VybCI6Im5leHR1aS1zdG9yeWJvb2stdjItZ2l0LWZpeC1vdXRzaWRlLWlucHV0LXNlbC0yZmNhYzYtbmV4dHVpLW9yZy52ZXJjZWwuYXBwIiwibmV4dENvbW1pdFN0YXR1cyI6IkRFUExPWUVEIiwibGl2ZUZlZWRiYWNrIjp7InJlc29sdmVkIjowLCJ1bnJlc29sdmVkIjowLCJ0b3RhbCI6MCwibGluayI6Im5leHR1aS1zdG9yeWJvb2stdjItZ2l0LWZpeC1vdXRzaWRlLWlucHV0LXNlbC0yZmNhYzYtbmV4dHVpLW9yZy52ZXJjZWwuYXBwIn19XX0=
**The latest updates on your projects**. Learn more about [Vercel for Git ‚ÜóÔ∏é](https://vercel.link/github-learn-more)

| Name | Status | Preview | Comments | Updated (UTC) |
| :--- | :----- | :------ | :------- | :------ |
| **nextui-docs-v2** | ‚úÖ Ready ([Inspect](https://vercel.com/nextui-org/nextui-docs-v2/CchUXHvpHuP1cfqz52goSLFPP2W3)) | [Visit Preview](https://vercel.live/open-feedback/nextui-docs-v2-git-fix-outside-input-select-color-nextui-org.vercel.app?via=pr-comment-visit-preview-link&passThrough=1) | üí¨ [**Add feedback**](https://vercel.live/open-feedback/nextui-docs-v2-git-fix-outside-input-select-color-nextui-org.vercel.app?via=pr-comment-feedback-link) | Nov 6, 2023 6:31pm |
| **nextui-storybook-v2** | ‚úÖ Ready ([Inspect](https://vercel.com/nextui-org/nextui-storybook-v2/pxQmdvyTYJZxVew3bkLCYa5sHT3S)) | [Visit Preview](https://vercel.live/open-feedback/nextui-storybook-v2-git-fix-outside-input-sel-2fcac6-nextui-org.vercel.app?via=pr-comment-visit-preview-link&passThrough=1) | üí¨ [**Add feedback**](https://vercel.live/open-feedback/nextui-storybook-v2-git-fix-outside-input-sel-2fcac6-nextui-org.vercel.app?via=pr-comment-feedback-link) | Nov 6, 2023 6:31pm |


\n

Files Changed:
- .changeset/angry-waves-sit.md (added, 8 changes)\n  Patch: @@ -0,0 +1,8 @@
+---
+"@nextui-org/select": patch
+"@nextui-org/input": patch
+"@nextui-org/theme": patch
+---
+
+- Label position changed for Select and Input, this avoids to break the layout when having long descriptions and no placeholder
+- Input/Select styles improved, label opacity removed\n- packages/components/input/src/input.tsx (modified, 8 changes)\n  Patch: @@ -16,8 +16,7 @@ const Input = forwardRef<"input", InputProps>((props, ref) => {
     endContent,
     labelPlacement,
     hasHelper,
-    isLabelOutside,
-    isLabelOutsideAsPlaceholder,
+    isOutsideLeft,
     shouldLabelBeOutside,
     errorMessage,
     getBaseProps,
@@ -86,7 +85,7 @@ const Input = forwardRef<"input", InputProps>((props, ref) => {
       return (
         <div {...getMainWrapperProps()}>
           <div {...getInputWrapperProps()}>
-            {isLabelOutsideAsPlaceholder ? labelContent : null}
+            {!isOutsideLeft ? labelContent : null}
             {innerWrapper}
           </div>
           {helperWrapper}
@@ -107,7 +106,6 @@ const Input = forwardRef<"input", InputProps>((props, ref) => {
     labelPlacement,
     helperWrapper,
     shouldLabelBeOutside,
-    isLabelOutsideAsPlaceholder,
     labelContent,
     innerWrapper,
     errorMessage,
@@ -120,7 +118,7 @@ const Input = forwardRef<"input", InputProps>((props, ref) => {
 
   return (
     <Component {...getBaseProps()}>
-      {isLabelOutside ? labelContent : null}
+      {isOutsideLeft ? labelContent : null}
       {mainWrapper}
     </Component>
   );\n- packages/components/input/src/use-input.ts (modified, 2 changes)\n  Patch: @@ -195,6 +195,7 @@ export function useInput<T extends HTMLInputElement | HTMLTextAreaElement = HTML
     ? (!domRef.current.value || domRef.current.value === "" || !inputValue || inputValue === "") &&
       hasPlaceholder
     : false;
+  const isOutsideLeft = labelPlacement === "outside-left";
 
   const hasStartContent = !!startContent;
   const isLabelOutside = shouldLabelBeOutside
@@ -445,6 +446,7 @@ export function useInput<T extends HTMLInputElement | HTMLTextAreaElement = HTML
     hasHelper,
     hasStartContent,
     isLabelOutside,
+    isOutsideLeft,
     isLabelOutsideAsPlaceholder,
     shouldLabelBeOutside,
     shouldLabelBeInside,\n- packages/components/input/stories/input.stories.tsx (modified, 22 changes)\n  Patch: @@ -150,17 +150,27 @@ const LabelPlacementTemplate = (args) => (
     <div className="flex flex-col gap-3">
       <h3>Without placeholder</h3>
       <div className="w-full max-w-xl flex flex-row items-end gap-4">
-        <Input {...args} />
-        <Input {...args} labelPlacement="outside" />
-        <Input {...args} labelPlacement="outside-left" />
+        <Input {...args} description="inside" />
+        <Input {...args} description="outside" labelPlacement="outside" />
+        <Input {...args} description="outside-left" labelPlacement="outside-left" />
       </div>
     </div>
     <div className="flex flex-col gap-3">
       <h3>With placeholder</h3>
       <div className="w-full max-w-xl flex flex-row items-end gap-4">
-        <Input {...args} placeholder="Enter your email" />
-        <Input {...args} labelPlacement="outside" placeholder="Enter your email" />
-        <Input {...args} labelPlacement="outside-left" placeholder="Enter your email" />
+        <Input {...args} description="inside" placeholder="Enter your email" />
+        <Input
+          {...args}
+          description="outside"
+          labelPlacement="outside"
+          placeholder="Enter your email"
+        />
+        <Input
+          {...args}
+          description="outside-left"
+          labelPlacement="outside-left"
+          placeholder="Enter your email"
+        />
       </div>
     </div>
   </div>\n- packages/components/select/src/select.tsx (modified, 6 changes)\n  Patch: @@ -28,6 +28,7 @@ function Select<T extends object>(props: Props<T>, ref: ForwardedRef<HTMLSelectE
     endContent,
     placeholder,
     renderValue,
+    isOutsideLeft,
     disableAnimation,
     getBaseProps,
     getLabelProps,
@@ -37,7 +38,6 @@ function Select<T extends object>(props: Props<T>, ref: ForwardedRef<HTMLSelectE
     getPopoverProps,
     getSpinnerProps,
     getMainWrapperProps,
-    shouldLabelBeOutside,
     getInnerWrapperProps,
     getHiddenSelectProps,
     getHelperWrapperProps,
@@ -115,10 +115,10 @@ function Select<T extends object>(props: Props<T>, ref: ForwardedRef<HTMLSelectE
   return (
     <div {...getBaseProps()}>
       <HiddenSelect {...getHiddenSelectProps()} />
-      {shouldLabelBeOutside ? labelContent : null}
+      {isOutsideLeft ? labelContent : null}
       <div {...getMainWrapperProps()}>
         <Component {...getTriggerProps()}>
-          {!shouldLabelBeOutside ? labelContent : null}
+          {!isOutsideLeft ? labelContent : null}
           <div {...getInnerWrapperProps()}>
             {startContent}
             <span {...getValueProps()}>\n- packages/components/select/src/use-select.ts (modified, 2 changes)\n  Patch: @@ -262,6 +262,7 @@ export function useSelect<T extends object>(originalProps: UseSelectProps<T>) {
     labelPlacement === "outside-left" ||
     (labelPlacement === "outside" && (hasPlaceholder || !!originalProps.isMultiline));
   const shouldLabelBeInside = labelPlacement === "inside";
+  const isOutsideLeft = labelPlacement === "outside-left";
   const isFilled =
     state.isOpen ||
     hasPlaceholder ||
@@ -582,6 +583,7 @@ export function useSelect<T extends object>(originalProps: UseSelectProps<T>) {
     hasPlaceholder,
     renderValue,
     selectionMode,
+    isOutsideLeft,
     disableAnimation,
     shouldLabelBeOutside,
     shouldLabelBeInside,\n- packages/core/theme/src/components/input.ts (modified, 51 changes)\n  Patch: @@ -33,19 +33,15 @@ const input = tv({
       "block",
       "text-small",
       "text-foreground-500",
-      "opacity-70",
-      "group-data-[filled-within=true]:opacity-100",
     ],
     mainWrapper: "h-full",
     inputWrapper:
       "relative w-full inline-flex tap-highlight-transparent flex-row items-center shadow-sm px-3 gap-3",
     innerWrapper: "inline-flex w-full items-center h-full box-border",
     input: [
-      "opacity-70",
       "w-full font-normal bg-transparent !outline-none placeholder:text-foreground-500 focus-visible:outline-none",
       "data-[has-start-content=true]:ps-1.5",
       "data-[has-end-content=true]:pe-1.5",
-      "group-data-[has-value=true]:opacity-100",
     ],
     clearButton: [
       "p-2",
@@ -77,8 +73,6 @@ const input = tv({
           "data-[hover=true]:bg-default-200",
           "group-data-[focus=true]:bg-default-100",
         ],
-        input: "placeholder:text-default-foreground",
-        label: "text-default-foreground",
       },
       faded: {
         inputWrapper: [
@@ -87,8 +81,7 @@ const input = tv({
           "border-default-200",
           "data-[hover=true]:border-default-400",
         ],
-        input: "placeholder:text-default-foreground",
-        label: "text-default-foreground",
+        value: "group-data-[has-value=true]:text-default-foreground",
       },
       bordered: {
         inputWrapper: [
@@ -97,8 +90,6 @@ const input = tv({
           "data-[hover=true]:border-default-400",
           "group-data-[focus=true]:border-default-foreground",
         ],
-        input: "placeholder:text-foreground",
-        label: "text-foreground",
       },
       underlined: {
         inputWrapper: [
@@ -124,14 +115,11 @@ const input = tv({
           "group-data-[focus=true]:after:w-full",
         ],
         innerWrapper: "pb-1",
-        input: "placeholder:text-foreground",
-        label: "text-foreground",
+        label: "group-data-[filled-within=true]:text-foreground",
       },
     },
     color: {
-      default: {
-        label: "group-data-[filled-within=true]:opacity-80",
-      },
+      default: {},
       primary: {},
       secondary: {},
       success: {},
@@ -175,7 +163,6 @@ const input = tv({
     },
     labelPlacement: {
       outside: {
-        label: "text-foreground pb-1.5",
         mainWrapper: "flex flex-col",
       },
       "outside-left": {
@@ -211,7 +198,7 @@ const input = tv({
     isInvalid: {
       true: {
         label: "!text-danger",
-        input: "placeholder:text-danger text-danger",
+        input: "!placeholder:text-danger !text-danger",
       },
     },
     isRequired: {
@@ -257,6 +244,13 @@ const input = tv({
   },
   compoundVariants: [
     // flat & color
+    {
+      variant: "flat",
+      color: "default",
+      class: {
+        input: "group-data-[has-value=true]:text-default-foreground",
+      },
+    },
     {
       variant: "flat",
       color: "primary",
@@ -380,6 +374,13 @@ const input = tv({
       },
     },
     // underlined & color
+    {
+      variant: "underlined",
+      color: "default",
+      class: {
+        input: "group-data-[has-value=true]:text-foreground",
+      },
+    },
     {
       variant: "underlined",
       color: "primary",
@@ -461,6 +462,22 @@ const input = tv({
         label: "text-danger",
       },
     },
+    // labelPlacement=inside & default
+    {
+      labelPlacement: "inside",
+      color: "default",
+      class: {
+        label: "group-data-[filled-within=true]:text-default-600",
+      },
+    },
+    // labelPlacement=outside & default
+    {
+      labelPlacement: "outside",
+      color: "default",
+      class: {
+        label: "group-data-[filled-within=true]:text-foreground",
+      },
+    },
     // radius-full & size
     {
       radius: "full",\n- packages/core/theme/src/components/select.ts (modified, 58 changes)\n  Patch: @@ -15,8 +15,6 @@ const select = tv({
       "text-small",
       "text-foreground-500",
       "pointer-events-none",
-      "opacity-70",
-      "group-data-[filled=true]:opacity-100",
     ],
     mainWrapper: "w-full flex flex-col",
     trigger:
@@ -25,13 +23,7 @@ const select = tv({
       "inline-flex h-full w-[calc(100%_-_theme(spacing.unit-6))] min-h-unit-4 items-center gap-1.5 box-border",
     selectorIcon: "absolute right-3 w-unit-4 h-unit-4",
     spinner: "absolute right-3",
-    value: [
-      "font-normal",
-      "w-full",
-      "text-left",
-      "opacity-70",
-      "group-data-[has-value=true]:opacity-100",
-    ],
+    value: ["text-foreground-500", "font-normal", "w-full", "text-left"],
     listboxWrapper: "scroll-py-6 max-h-64 w-full",
     listbox: "",
     popoverContent: "w-full p-1 overflow-hidden",
@@ -47,8 +39,6 @@ const select = tv({
           "data-[hover=true]:bg-default-200",
           "group-data-[focus=true]:bg-default-100",
         ],
-        label: "text-default-foreground",
-        value: "placeholder:text-default-foreground",
       },
       faded: {
         trigger: [
@@ -57,8 +47,7 @@ const select = tv({
           "border-default-200",
           "data-[hover=true]:border-default-400",
         ],
-        label: "text-default-foreground",
-        value: "placeholder:text-default-foreground",
+        value: "group-data-[has-value=true]:text-default-foreground",
       },
       bordered: {
         trigger: [
@@ -69,8 +58,6 @@ const select = tv({
           "data-[focus=true]:border-default-foreground",
           "data-[focus=true]:border-default-foreground",
         ],
-        label: "text-foreground",
-        value: "placeholder:text-foreground",
       },
       underlined: {
         trigger: [
@@ -96,14 +83,11 @@ const select = tv({
           "data-[open=true]:after:w-full",
           "data-[focus=true]:after:w-full",
         ],
-        label: "text-foreground",
-        value: "placeholder:text-foreground",
+        label: "group-data-[filled=true]:text-foreground",
       },
     },
     color: {
-      default: {
-        label: "group-data-[filled=true]:opacity-80",
-      },
+      default: {},
       primary: {},
       secondary: {},
       success: {},
@@ -145,11 +129,10 @@ const select = tv({
     labelPlacement: {
       outside: {
         base: "flex flex-col",
-        label: "text-foreground pb-1.5",
       },
       "outside-left": {
         base: "flex-row items-center flex-nowrap items-start",
-        label: "relative text-foreground pr-2",
+        label: "relative pr-2 text-foreground",
       },
       inside: {
         label: "text-tiny cursor-pointer",
@@ -228,6 +211,13 @@ const select = tv({
   },
   compoundVariants: [
     // flat & color
+    {
+      variant: "flat",
+      color: "default",
+      class: {
+        value: "group-data-[has-value=true]:text-default-foreground",
+      },
+    },
     {
       variant: "flat",
       color: "primary",
@@ -343,6 +333,14 @@ const select = tv({
       },
     },
     // underlined & color
+    // underlined & color
+    {
+      variant: "underlined",
+      color: "default",
+      class: {
+        value: "group-data-[has-value=true]:text-foreground",
+      },
+    },
     {
       variant: "underlined",
       color: "primary",
@@ -424,6 +422,22 @@ const select = tv({
         label: "text-danger",
       },
     },
+    // labelPlacement=outside & default
+    {
+      labelPlacement: "inside",
+      color: "default",
+      class: {
+        label: "group-data-[filled=true]:text-default-600",
+      },
+    },
+    // labelPlacement=outside & default
+    {
+      labelPlacement: "outside",
+      color: "default",
+      class: {
+        label: "group-data-[filled=true]:text-foreground",
+      },
+    },
     // radius-full & size
     {
       radius: "full",\n
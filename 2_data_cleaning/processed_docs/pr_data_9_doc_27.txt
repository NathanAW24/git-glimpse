Pull Request Number: 3240
Title: fix: RA dependencies bump
Base Branch: canary
Head Branch: fix/focus
Author: wingkwong
URL: https://github.com/nextui-org/nextui/pull/3240
State: MERGED
Created At: 2024-06-12T08:12:25Z
Merged At: 2024-06-15T00:44:59Z
Participants: wingkwong, jrgarciadev

Description:
üìù Description


Bump React Aria dependencies

Closes #3197
Closes #2930
Closes #3206
Closes #2579
Closes #3232



Remove disableFocusManagement from Overlay so that FocusScope will be there to have focus trap.

Closes: #3204




  
    
    

    pr3240-demo-focus-trap.webm
    
  

  

  



Closes: #3171


  
    
    

    pr3240-demo-isKeyboardDismissDisabled.webm
    
  

  

  



Closes: #2992


  
    
    

    pr3240-demo-1.webm
    
  

  

  



Bump react-aria versions and revise focus behaviour logic

Closes: #3132



p.s. for demonstration only, no storybook changes will be committed

  
    
    

    pr3240-demo-popover-related.webm
    
  

  

  



Dropdown onPress issue

Closes: #3121




  
    
    

    pr3240-demo-enter-space-onpress.webm
    
  

  

  


‚õ≥Ô∏è Current behavior (updates)

Please describe the current behavior that you are modifying

üöÄ New behavior
üí£ Is this a breaking change (Yes/No):

üìù Additional Information

Summary by CodeRabbit


Bug Fixes

Addressed and fixed the popover focus issue in popover and autocomplete components.



Updates

Removed disableFocusManagement from the Overlay component in modal and popover packages.



Dependency Updates

Updated versions for various @react-aria and @react-stately packages to improve interactions and utilities.



Deprecated

Deprecated the onClick event handler in favor of onPress for menu items.



Tests

Added assertions for focus in autocomplete tests.
Updated key event handling in dropdown tests.

Commits:
- fix(popover): popover focus issue (#3187)

* fix(popover): move useDialog to popover-content

* fix(popover): move useDialog to free-solo-popover

* refactor(popover): use const instead

* feat(changset): add changeset

* feat(popover): popover focus test

* refactor(popover): getDialogProps\n- fix: interactions with popover & focus issues (#3137)

* fix(aria-utils): handle click on listbox

* fix(popover): move useDialog to popover-content

* fix(popover): move useDialog to free-solo-popover

* refactor(popover): use const instead

* feat(changset): add changeset

* feat(popover): popover focus test

* refactor(popover): getDialogProps

* chore(utilities): remove ariaShouldCloseOnInteractOutside

* chore(deps): pnpm-lock.yaml

* fix(popover): remove disableFocusManagement

* fix(modal): remove disableFocusManagement

* fix(autocomplete): remove custom focus logic and remove ariaShouldCloseOnInteractOutside

* fix(popover): rewrite shouldCloseOnInteractOutside logic

* chore(utilities): remove ariaShouldCloseOnInteractOutside

* chore(deps): bump react-aria dependencies

* chore(autocomplete): change back to focus

* feat(changeset): update changeset

* chore(docs): update type in onSelectionChange

* fix(popover): revise popover test case

* chore(deps): add @nextui-org/aria-utils

* fix(autocomplete): add ariaShouldCloseOnInteractOutside

* fix(date-picker): add ariaShouldCloseOnInteractOutside

* fix(select): add ariaShouldCloseOnInteractOutside

* chore(deps): add @nextui-org/aria-utils

* fix(dropdown): add ariaShouldCloseOnInteractOutside

* feat(utilities): rewrite ariaShouldCloseOnInteractOutside

* fix(popover): use ariaShouldCloseOnInteractOutside

* fix(autocomplete): add back shouldFocus

* fix(utilities): include shouldFocus logic

* chore(utilities): remove !

* refactor(aria-utils): add more comments

* chore(changeset): update packages

* refactor(aria-utils): add more comments

* feat(popover): add test\n- fix: dropdown onPress issue (#3211)

* fix(popover): move useDialog to popover-content

* fix(popover): move useDialog to free-solo-popover

* refactor(popover): use const instead

* feat(changset): add changeset

* feat(popover): popover focus test

* refactor(popover): getDialogProps

* fix(popover): dropdown onPress blocking issue

* fix(dropdown): incorrect keyCodes

* feat(dropdown): add keyboard onPress test cases\n- chore(deps): keep all @react-aria/overlays version consistent\n- chore(deps): sync dependencies\n- chore(deps): sync dependencies\n- refactor(aria-utils): remove shouldFocus logic\n- refactor(autocomplete): remove shouldFocus logic and set input focus when open\n- chore(deps): bump dependencies\n- chore(deps): fix react aria dependencies\n- fix(autocomplete): move popover style width inside isOpen true block\n- fix(autocomplete): focus back to trigger\n- feat(changeset): add changeset\n- Merge branch 'canary' into fix/focus\n- chore(deps): bump react-aria dependencies\n- refactor(autocomplete): revise comment\n- refactor(dropdown): revise logSpy and trigger mockRestore\n- refactor(popover): remove debug className\n- fix(date-input): avoid setting isInvalid in useDateFieldState\n- fix(autocomplete): use ComboBoxValidationValue\n- feat(use-aria-menu): add deprecate message\n- feat(changeset): add missing packages\n- refactor(use-aria-menu): remove isLink since it is included in useLinkProps\n- Update packages/hooks/use-aria-menu/src/use-menu-item.ts\n

Labels:


Comments:
- vercel: [vc]: #izZv6ebTHeH92OLxLON+CHRiOmUz243jZJcI2o0v/cU=:eyJpc01vbm9yZXBvIjp0cnVlLCJ0eXBlIjoiZ2l0aHViIiwicHJvamVjdHMiOlt7Im5hbWUiOiJuZXh0dWktZG9jcy12MiIsInJvb3REaXJlY3RvcnkiOiJhcHBzL2RvY3MiLCJpbnNwZWN0b3JVcmwiOiJodHRwczovL3ZlcmNlbC5jb20vbmV4dHVpLW9yZy9uZXh0dWktZG9jcy12Mi9FWW1mU0VpbnZ6YjE2QWk4WHJBUHdSUm5maDhEIiwicHJldmlld1VybCI6Im5leHR1aS1kb2NzLXYyLWdpdC1maXgtZm9jdXMtbmV4dHVpLW9yZy52ZXJjZWwuYXBwIiwibmV4dENvbW1pdFN0YXR1cyI6IkRFUExPWUVEIiwibGl2ZUZlZWRiYWNrIjp7InJlc29sdmVkIjowLCJ1bnJlc29sdmVkIjowLCJ0b3RhbCI6MCwibGluayI6Im5leHR1aS1kb2NzLXYyLWdpdC1maXgtZm9jdXMtbmV4dHVpLW9yZy52ZXJjZWwuYXBwIn19LHsibmFtZSI6Im5leHR1aS1zdG9yeWJvb2stdjIiLCJyb290RGlyZWN0b3J5IjoicGFja2FnZXMvc3Rvcnlib29rIiwiaW5zcGVjdG9yVXJsIjoiaHR0cHM6Ly92ZXJjZWwuY29tL25leHR1aS1vcmcvbmV4dHVpLXN0b3J5Ym9vay12Mi9Id1VmWE5vcVViczJySERRMVdZVDlHVnRleE5OIiwicHJldmlld1VybCI6Im5leHR1aS1zdG9yeWJvb2stdjItZ2l0LWZpeC1mb2N1cy1uZXh0dWktb3JnLnZlcmNlbC5hcHAiLCJuZXh0Q29tbWl0U3RhdHVzIjoiREVQTE9ZRUQiLCJsaXZlRmVlZGJhY2siOnsicmVzb2x2ZWQiOjAsInVucmVzb2x2ZWQiOjAsInRvdGFsIjowLCJsaW5rIjoibmV4dHVpLXN0b3J5Ym9vay12Mi1naXQtZml4LWZvY3VzLW5leHR1aS1vcmcudmVyY2VsLmFwcCJ9fV19
**The latest updates on your projects**. Learn more about [Vercel for Git ‚ÜóÔ∏é](https://vercel.link/github-learn-more)

| Name | Status | Preview | Comments | Updated (UTC) |
| :--- | :----- | :------ | :------- | :------ |
| **nextui-docs-v2** | ‚úÖ Ready ([Inspect](https://vercel.com/nextui-org/nextui-docs-v2/EYmfSEinvzb16Ai8XrAPwRRnfh8D)) | [Visit Preview](https://vercel.live/open-feedback/nextui-docs-v2-git-fix-focus-nextui-org.vercel.app?via=pr-comment-visit-preview-link&passThrough=1) | üí¨ [**Add feedback**](https://vercel.live/open-feedback/nextui-docs-v2-git-fix-focus-nextui-org.vercel.app?via=pr-comment-feedback-link) | Jun 14, 2024 11:57pm |
| **nextui-storybook-v2** | ‚úÖ Ready ([Inspect](https://vercel.com/nextui-org/nextui-storybook-v2/HwUfXNoqUbs2rHDQ1WYT9GVtexNN)) | [Visit Preview](https://vercel.live/open-feedback/nextui-storybook-v2-git-fix-focus-nextui-org.vercel.app?via=pr-comment-visit-preview-link&passThrough=1) | üí¨ [**Add feedback**](https://vercel.live/open-feedback/nextui-storybook-v2-git-fix-focus-nextui-org.vercel.app?via=pr-comment-feedback-link) | Jun 14, 2024 11:57pm |


\n- changeset-bot: ###  ü¶ã  Changeset detected

Latest commit: 099ab7fd7e06bf040c26f47cade0904c83cba255

**The changes in this PR will be included in the next version bump.**

<details><summary>This PR includes changesets to release 47 packages</summary>

  | Name                                  | Type  |
| ------------------------------------- | ----- |
| @nextui-org/popover                   | Patch |
| @nextui-org/autocomplete              | Patch |
| @nextui-org/aria-utils                | Patch |
| @nextui-org/modal                     | Patch |
| @nextui-org/accordion                 | Patch |
| @nextui-org/avatar                    | Patch |
| @nextui-org/breadcrumbs               | Patch |
| @nextui-org/button                    | Patch |
| @nextui-org/calendar                  | Patch |
| @nextui-org/card                      | Patch |
| @nextui-org/checkbox                  | Patch |
| @nextui-org/chip                      | Patch |
| @nextui-org/date-input                | Patch |
| @nextui-org/date-picker               | Patch |
| @nextui-org/dropdown                  | Patch |
| @nextui-org/input                     | Patch |
| @nextui-org/kbd                       | Patch |
| @nextui-org/link                      | Patch |
| @nextui-org/listbox                   | Patch |
| @nextui-org/menu                      | Patch |
| @nextui-org/navbar                    | Patch |
| @nextui-org/pagination                | Patch |
| @nextui-org/progress                  | Patch |
| @nextui-org/radio                     | Patch |
| @nextui-org/select                    | Patch |
| @nextui-org/slider                    | Patch |
| @nextui-org/snippet                   | Patch |
| @nextui-org/switch                    | Patch |
| @nextui-org/table                     | Patch |
| @nextui-org/tabs                      | Patch |
| @nextui-org/tooltip                   | Patch |
| @nextui-org/user                      | Patch |
| @nextui-org/react                     | Patch |
| @nextui-org/system                    | Patch |
| @nextui-org/use-aria-accordion        | Patch |
| @nextui-org/use-aria-accordion-item   | Patch |
| @nextui-org/use-aria-button           | Patch |
| @nextui-org/use-aria-link             | Patch |
| @nextui-org/use-aria-menu             | Patch |
| @nextui-org/use-aria-modal-overlay    | Patch |
| @nextui-org/use-aria-multiselect      | Patch |
| @nextui-org/use-aria-toggle-button    | Patch |
| @nextui-org/use-disclosure            | Patch |
| @nextui-org/use-intersection-observer | Patch |
| @nextui-org/use-is-mobile             | Patch |
| @nextui-org/use-pagination            | Patch |
| @nextui-org/framer-utils              | Patch |

</details>

Not sure what this means? [Click here  to learn what changesets are](https://github.com/changesets/changesets/blob/main/docs/adding-a-changeset.md).

[Click here if you're a maintainer who wants to add another changeset to this PR](https://github.com/nextui-org/nextui/new/fix/focus?filename=.changeset/large-boats-clean.md&value=---%0A%22%40nextui-org%2Fdocs%22%3A%20patch%0A%22%40nextui-org%2Faccordion%22%3A%20patch%0A%22%40nextui-org%2Fautocomplete%22%3A%20patch%0A%22%40nextui-org%2Favatar%22%3A%20patch%0A%22%40nextui-org%2Fbreadcrumbs%22%3A%20patch%0A%22%40nextui-org%2Fbutton%22%3A%20patch%0A%22%40nextui-org%2Fcalendar%22%3A%20patch%0A%22%40nextui-org%2Fcard%22%3A%20patch%0A%22%40nextui-org%2Fcheckbox%22%3A%20patch%0A%22%40nextui-org%2Fchip%22%3A%20patch%0A%22%40nextui-org%2Fdate-input%22%3A%20patch%0A%22%40nextui-org%2Fdate-picker%22%3A%20patch%0A%22%40nextui-org%2Fdropdown%22%3A%20patch%0A%22%40nextui-org%2Finput%22%3A%20patch%0A%22%40nextui-org%2Fkbd%22%3A%20patch%0A%22%40nextui-org%2Flink%22%3A%20patch%0A%22%40nextui-org%2Flistbox%22%3A%20patch%0A%22%40nextui-org%2Fmenu%22%3A%20patch%0A%22%40nextui-org%2Fmodal%22%3A%20patch%0A%22%40nextui-org%2Fnavbar%22%3A%20patch%0A%22%40nextui-org%2Fpagination%22%3A%20patch%0A---%0A%0Afix%3A%20RA%20dependencies%20bump%0A)

\n- coderabbitai: <!-- This is an auto-generated comment: summarize by coderabbit.ai -->
<!-- walkthrough_start -->

## Walkthrough

This release introduces several enhancements and bug fixes across various packages in the NextUI library, including updates to popover focus management, handling of key events in dropdowns, changes to package dependencies, and refinements in event handling. The changes address issues related to popover focus issues, modal focus trapping, and autocomplete functionalities, among others.

## Changes

| File(s) | Change Summary |
| ------- | -------------- |
| `.changeset/clever-gifts-joke.md` | Introduced patches for `@nextui-org/popover`, `@nextui-org/autocomplete`, and `@nextui-org/aria-utils` to fix popover focus issues. |
| `.changeset/cold-peas-dream.md` | Removed `disableFocusManagement` from the `Overlay` component in `@nextui-org/modal` and `@nextui-org/popover`. |
| `.changeset/metal-clocks-yawn.md` | Patch updates to various `@nextui-org` packages and bump in `react-aria` dependencies. |
| `apps/docs/app/examples/.../page.tsx` | Enhanced `onSelectionChange` function in the `Page` component to accept an additional `null` parameter. |
| `apps/docs/package.json` | Updated versions of `@react-aria` and `@react-stately` packages. |
| `packages/core/system/package.json` | Version updates for various dependencies like `@react-aria/i18n`, `@react-aria/overlays`, and `@react-stately/utils`. |
| `packages/hooks/use-aria-accordion/...` | Updated versions for dependencies in the `use-aria-accordion` package. |
| `packages/components/autocomplete/...` | Modified test assertions related to input focus in autocomplete component. |
| `packages/components/date-input/...` | Removed `isInvalid` parameter from the `useDateInput` function. |
| `packages/components/dropdown/...` | Updated key event handling for "Space" and "Enter" keys and added new test cases. |
| `packages/components/popover/...` | Refactored `PopoverContent` component to remove `useCallback`, update dialog management, and adjust content rendering. |
| `packages/hooks/use-aria-menu/...` | Deprecated `onClick` event handler in favor of `onPress` in `AriaMenuItemProps`. |

## Assessment against linked issues

| Objective | Addressed | Explanation |
| --------- | --------- | ----------- |
| Fix the `TypeError` related to `startsWith` in child components (Issue #3197, #2930) | ‚ùì | Code changes include dependency updates and focus management fixes, but it's unclear if the specific `startsWith` issue in nested child elements is resolved. |
| Ensure `ListboxItem` and `Link` components handle `href` and prevent full page reloads (Issue #3206, #2579, #3232) | ‚ùì | Changes to package updates and event handling might address this, but specific fixes to `href` handling in `ListboxItem` and `Link` components are not explicitly described. |
| Improve focus management in `Popover` and `Modal` components (Issue #3171, #2992, #3204) | ‚úÖ | Updates include enhancements to focus trapping and popover focus management. |
| Resolve keyboard navigation issues in dropdowns and popovers (Issue #3121, #3132) | ‚úÖ | Adjustments to key event handling and popover content behavior have been made.

<!-- walkthrough_end --><!-- This is an auto-generated comment: raw summary by coderabbit.ai -->

<!--

# Existing changesets

# Existing changesets

# Existing changesets

# Existing changesets

# Existing changesets

```markdown
.changeset/clever-gifts-joke.md: ### Summary

The new file introduces patches for "@nextui-org/popover", "@nextui-org/autocomplete", and "@nextui-org/aria-utils" packages to address and fix the popover focus issue (#3171, #2992).

---

.changeset/cold-peas-dream.md: ## Short Summary

The new file introduces changes to the `@nextui-org/modal` and `@nextui-org/popover` packages by removing `disableFocusManagement` from the Overlay component.

---

.changeset/metal-clocks-yawn.md: ### Summary

The changes in the file `metal-clocks-yawn.md` involve patch updates to a variety of `@nextui-org` packages and a bump in `react-aria` dependencies.

### Alterations to the declarations of exported or public entities

No alterations to the declarations of exported or public entities were made in this file.

---

apps/docs/app/examples/autocomplete/fully-controlled/page.tsx: ## Short Summary
The `onSelectionChange` function in the `Page` component now accepts an additional parameter of type `null` in addition to `React.Key`.

## Alterations to the declarations of exported or public entities
- `const onSelectionChange = (key: React.Key | null) => {` in file `apps/docs/app/examples/autocomplete/fully-controlled/page.tsx`

---

apps/docs/package.json: ## Short Summary

The diff in `package.json` for the `@react-aria` and `@react-stately` packages shows updates to specific versions, affecting the interactions, selection, virtualization, and other utilities within the project.

## Alterations to the declarations of exported or public entities

- `@react-aria/focus`: Updated from `"^3.16.2"` to `"3.17.1"`
- `@react-aria/interactions`: Updated from `"^3.21.1"` to `"3.21.3"`
- `@react-aria/selection`: Updated from `"^3.17.5"` to `"3.18.1"`
- `@react-aria/ssr`: Updated from `"^3.9.2"` to `"3.9.4"`
- `@react-aria/virtualizer`: Updated from `"^3.9.10"` to `"3.10.1"`
- `@react-aria/visually-hidden`: Updated from `"^3.8.10"` to `"3.8.12"`
- `@react-stately/data`: Updated from `"^3.11.2"` to `"3.11.4"`
- `@react-stately/layout`: Updated from `"^3.13.7"` to `"3.13.9"`
- `@react-stately/tree`: Updated from `"^3.7.6"` to `"3.8.1"`

---

packages/core/system/package.json: ## Summary:
The changes in the `package.json` file include updates to the versions of various dependencies. Specifically, there are version bumps for `@react-aria/i18n`, `@react-aria/overlays`, and `@react-stately/utils`.

## Alterations to the declarations of exported or public entities:
- `@react-aria/i18n`: Updated from version "3.10.2" to "3.11.1"
- `@react-aria/overlays`: Updated from version "3.21.1" to "3.22.1`
- `@react-stately/utils`: Updated from version "3.9.1" to "3.10.1"

---

packages/hooks/use-aria-accordion/package.json: ## Short Summary

The changes in `package.json` for the `use-aria-accordion` package involve updating the versions of various dependencies like `@react-aria/button`, `@react-aria/focus`, `@react-aria/selection`, `@react-stately/tree`, and `@react-types/accordion`.

## Alterations to the declarations of exported or public entities

- `@react-aria/button`: Updated from version `3.9.3` to `3.9.5`
- `@react-aria/focus`: Updated from version `3.16.2` to `3.17.1`
- `@react-aria/selection`: Updated from version `3.17.5` to `3.18.1`
- `@react-stately/tree`: Updated from version `3.7.6` to `3.8.1`
- `@react-types/accordion`: Updated from version `3.0.0-alpha.19` to `3.0.0-alpha.21`
- `@react-aria/utils`: Version `3.24.1`
- `@react-types/shared`: Version `3.23.1`

---

packages/components/autocomplete/__tests__/autocomplete.test.tsx: ## Update existing summary

## Short Summary
In the given diff for `packages/components/autocomplete/__tests__/autocomplete.test.tsx`, the change involves asserting whether the input in the autocomplete component is focused or not.

## Alterations to the declarations of exported or public entities
- None

---

packages/components/date-input/src/use-date-input.ts: ## Short Summary

In the `useDateInput` function in `packages/components/date-input/src/use-date-input.ts`, the `isInvalid` parameter was removed from the function signature.

## Alterations to the declarations of exported or public entities

- `export function useDateInput<T extends DateValue>(originalProps: UseDateInputProps<T>): UseDateInputReturn<T>` in `packages/components/date-input/src/use-date-input.ts`  
  Before:
  ```typescript
  {
      minValue,
      maxValue,
      validationBehavior,
      isInvalid: isInvalidProp,
      shouldForceLeadingZeros,
      createCalendar:
        !createCalendarProp || typeof createCalendarProp !== "function"
  }
  ```
  After:
  ```typescript
  {
      minValue,
      maxValue,
      validationBehavior,
      shouldForceLeadingZeros,
      createCalendar:
        !createCalendarProp || typeof createCalendarProp !== "function"
  }
  ```

---

packages/components/dropdown/__tests__/dropdown.test.tsx: ### Summary

In the `dropdown.test.tsx` file, the changes involve updating the key event handling for the space key in the `fireEvent.keyDown` function calls. Additionally, new test cases have been added to simulate key presses for "Enter" and "Space" keys, triggering actions based on these key events.

### Alterations to the declarations of exported or public entities

- `fireEvent.keyDown(triggerButton, {key: " ", charCode: keyCodes.Space});` in `dropdown.test.tsx` ‚Üí `fireEvent.keyDown(triggerButton, {key: " ", charCode: keyCodes[" "]});` in `dropdown.test.tsx`

###

---

packages/components/popover/src/popover-content.tsx: ### Summary

In the `PopoverContent` component in `packages/components/popover/src/popover-content.tsx`, the following changes have been made:

1. Removed `useCallback`, `ReactElement`, and `ReactElement` imports.
2. Replaced `useCallback` with direct function declaration.
3. Removed `titleProps` from deconstructed props.
4. Added `useDialog` and `useRef` hooks to manage dialog props and dialog reference.
5. Adjusted the structure of `dialogProps` assignment.
6. Updated the structure of the `contents` rendering logic.
```

# New changesets

packages/components/autocomplete/__tests__/autocomplete.test.tsx: ## Update existing summary

## Short Summary
In the given diff for `packages/components/autocomplete/__tests__/autocomplete.test.tsx`, the change involves asserting whether the autocomplete input is focused or not.

## Alterations to the declarations of exported or public entities
- None

# New changesets

packages/hooks/use-aria-menu/src/use-menu-item.ts: ## Short Summary
The change in functionality involves deprecating the `onClick` event handler in favor of using `onPress` instead for the `AriaMenuItemProps` interface in the `use-menu-item.ts` file.

## Alterations to the declarations of exported or public entities
- `onClick?: DOMAttributes["onClick"];` in interface `AriaMenuItemProps` in `use-menu-item.ts` ‚Üí `onClick?: DOMAttributes["onClick"];` with deprecation note in `AriaMenuItemProps` in `use-menu-item.ts`

# New changesets

.changeset/metal-clocks-yawn.md: ## Summary

The changes in the file `metal-clocks-yawn.md` involve patch updates to a variety of Next UI components and related utility packages. Additionally, there is a bump in the dependencies related to react-aria.

## Alterations to the declarations of exported or public entities

No alterations to the declarations of exported or public entities were made in this file.

# New changesets

packages/hooks/use-aria-menu/src/use-menu-item.ts: ## Update existing summary


## Short Summary
The change in functionality involves deprecating the `onClick` event handler in favor of using `onPress` instead for the `AriaMenuItemProps` interface in the `use-menu-item.ts` file.

## Alterations to the declarations of exported or public entities
- `onClick?: DOMAttributes["onClick"];` in interface `AriaMenuItemProps` in `use-menu-item.ts` ‚Üí `onClick?: DOMAttributes["onClick"];` with deprecation note in `AriaMenuItemProps` in `use-menu-item.ts`

# New changesets

packages/hooks/use-aria-menu/src/use-menu-item.ts: ## Update existing summary

## Short Summary
The change in functionality involves deprecating the `onClick` event handler in favor of using `onPress` instead for the `AriaMenuItemProps` interface in the `use-menu-item.ts` file.

## Alterations to the declarations of exported or public entities
- `onClick?: DOMAttributes["onClick"];` in interface `AriaMenuItemProps` in `use-menu-item.ts` ‚Üí `onClick?: DOMAttributes["onClick"];` with deprecation note in `AriaMenuItemProps` in `use-menu-item.ts`

-->

<!-- end of auto-generated comment: raw summary by coderabbit.ai --><!-- This is an auto-generated comment: pr objectives by coderabbit.ai -->

<!--

### PR Summary

**Title:** fix: RA dependencies bump  
**User:** wingkwong  
**Number:** 3240  

**Description:**  
This pull request aims to update the React Aria dependencies and includes several bug fixes. Notable changes include:

- Bumping React Aria dependencies to address multiple issues.
- Removing `disableFocusManagement` from Overlay to ensure `FocusScope` provides a focus trap.
- Specific bug fixes related to focus behavior, dropdown onPress issues, and popover functionality.

This PR addresses and closes the following issues: #3197, #2930, #3206, #2579, #3232, #3204, #3171, #2992, #3132, and #3121. Additionally, it includes several demonstration videos to illustrate the fixes.

### Objectives from Linked Issues

1. **#3197**: Fix a `TypeError: Cannot read properties of undefined (reading 'startsWith')` when using tabs with href in NextUI.
2. **#2930**: Resolve an issue where `path` is undefined when using `NextUIProvider` and `useRouter` in a React component.
3. **#3206**: Address the `ListboxItem` href attribute not working correctly, causing unexpected page reloads.
4. **#2579**: Fix the `Link` component reloading the page instead of performing SPA routing in Astro.
5. **#3232**: Ensure the `navigate` function in `NextUIProvider` is called properly to prevent full page reloads.
6. **#3204**: Ensure the modal traps focus when navigating using a keyboard.
7. **#3171**: Fix the `isKeyboardDismissDisabled` prop not working in the `Popover` component.
8. **#2992**: Ensure focus moves inside the `Popover` component when it is opened.
9. **#3132**: Prevent the `Popover` from closing when selecting an item from `Autocomplete` or `Select`.
10. **#3121**: Fix the issue where pressing Enter or Space does not select an item in the dropdown.

-->

<!-- end of auto-generated comment: pr objectives by coderabbit.ai --><!-- This is an auto-generated comment: shorter summary by coderabbit.ai -->

<!--

### AI-generated Summary of Generated Summaries

This update introduces multiple changes across various packages in the project, primarily focusing on bug fixes, dependency updates, and deprecations. Here‚Äôs a detailed summary:

1. **Bug Fixes and Patches**:
   - **Popover Focus Issue**: Patches have been added to `@nextui-org/popover`, `@nextui-org/autocomplete`, and `@nextui-org/aria-utils` to address focus issues (#3171, #2992).
   - **Modal and Popover Focus Management**: The `disableFocusManagement` property has been removed from the Overlay component in `@nextui-org/modal` and `@nextui-org/popover`.

2. **Dependency Updates**:
   - **React-Aria and React-Stately**: Multiple packages under `@react-aria` and `@react-stately` have been updated to newer versions, affecting focus, interactions, selection, virtualization, and other utilities.
   - **Core System**: Updates to `@react-aria/i18n`, `@react-aria/overlays`, and `@react-stately/utils` have been made.
   - **Use-Aria-Accordion**: Dependencies such as `@react-aria/button`, `@react-aria/focus`, `@react-aria/selection`, `@react-stately/tree`, and `@react-types/accordion` have been updated.

3. **Functionality Changes**:
   - **Autocomplete Component**: The `onSelectionChange` function in the `Page` component now accepts `null` in addition to `React.Key`.
   - **Use-Date-Input Hook**: The `isInvalid` parameter has been removed from the `useDateInput` function signature.
   - **Dropdown Component**: Key event handling for the space key has been updated, and new test cases for "Enter" and "Space" keys have been added.
   - **Popover Content Component**: Several structural changes have been made, such as removing imports, replacing `useCallback` with direct function declarations, and managing dialog props and references using `useDialog` and `useRef`.

4. **Deprecations**:
   - **Use-Aria-Menu**: The `onClick` event handler in the `AriaMenuItemProps` interface has been deprecated in favor of using `onPress`.

### Alterations to the Declarations of Exported or Public Entities

1. **Autocomplete Component**:
   - **Before**:
     ```typescript
     const onSelectionChange = (key: React.Key) => { ... }
     ```
   - **After**:
     ```typescript
     const onSelectionChange = (key: React.Key | null) => { ... }
     ```

2. **Use-Date-Input Hook**:
   - **Before**:
     ```typescript
     export function useDateInput<T extends DateValue>(originalProps: UseDateInputProps<T>): UseDateInputReturn<T> {
         {
             minValue,
             maxValue,
             validationBehavior,
             isInvalid: isInvalidProp,
             shouldForceLeadingZeros,
             createCalendar:
               !createCalendarProp || typeof createCalendarProp !== "function"
         }
     }
     ```
   - **After**:
     ```typescript
     export function useDateInput<T extends DateValue>(originalProps: UseDateInputProps<T>): UseDateInputReturn<T> {
         {
             minValue,
             maxValue,
             validationBehavior,
             shouldForceLeadingZeros,
             createCalendar:
               !createCalendarProp || typeof createCalendarProp !== "function"
         }
     }
     ```

3. **Dropdown Component**:
   - **Before**:
     ```typescript
     fireEvent.keyDown(triggerButton, {key: " ", charCode: keyCodes.Space});
     ```
   - **After**:
     ```typescript
     fireEvent.keyDown(triggerButton, {key: " ", charCode: keyCodes[" "]});
     ```

4. **Use-Aria-Menu**:
   - **Before**:
     ```typescript
     interface AriaMenuItemProps {
         onClick?: DOMAttributes["onClick"];
     }
     ```
   - **After**:
     ```typescript
     interface AriaMenuItemProps {
         /**
          * @deprecated Use onPress instead
          */
         onClick?: DOMAttributes["onClick"];
     }
     ```

5. **Package Dependencies**:
   - **Core System**:
     - **@react-aria/i18n**:
       - Before: `"3.10.2"`
       - After: `"3.11.1"`
     - **@react-aria/overlays**:
       - Before: `"3.21.1"`
       - After: `"3.22.1"`
     - **@react-stately/utils**:
       - Before: `"3.9.1"`
       - After: `"3.10.1"`
   - **Use-Aria-Accordion**:
     - **@react-aria/button**:
       - Before: `"3.9.3"`
       - After: `"3.9.5"`
     - **@react-aria/focus**:
       - Before: `"3.16.2"`
       - After: `"3.17.1"`
     - **@react-aria/selection**:
       - Before: `"3.17.5"`
       - After: `"3.18.1"`
     - **@react-stately/tree**:
       - Before: `"3.7.6"`
       - After: `"3.8.1"`
     - **@react-types/accordion**:
       - Before: `"3.0.0-alpha.19"`
       - After: `"3.0.0-alpha.21"`
     - **@react-aria/utils**:
       - Version: `"3.24.1"`
     - **@react-types/shared**:
       - Version: `"3.23.1"`

-->

<!-- end of auto-generated comment: shorter summary by coderabbit.ai --><!-- commit_ids_reviewed_start -->

<!-- e8c26963bcfdd67d66b4deb7af92442a6de4bdb4 -->
<!-- 087354e8374886c7fc2708ddb62c4a0f1699fdd1 -->
<!-- 99d58275003704b2dbaaab50a169fcfb6519b259 -->
<!-- 9d7751bd8e1ba6fca8c31a8b653cfa1b109c7f3a -->
<!-- db5650542b987f8903e4f361add5fe76e9b05a8b -->
<!-- d89cb918bf890d3f1e5dc52c402d2d745c7f238a -->
<!-- 099ab7fd7e06bf040c26f47cade0904c83cba255 -->

<!-- commit_ids_reviewed_end --><!-- This is an auto-generated comment: resource permission warning by coderabbit.ai -->

> [!WARNING]
> ## Review ran into problems
> 
> <details>
> <summary>Problems (1)</summary>
> 
> * Git: Failed to clone repository. Please contact CodeRabbit support.
> 
> </details>

<!-- end of auto-generated comment: resource permission warning by coderabbit.ai --><!-- tips_start -->

---



Thank you for using CodeRabbit. We offer it for free to the OSS community and would appreciate your support in helping us grow. If you find it useful, would you consider giving us a shout-out on your favorite social media?

<details>
<summary>Share</summary>

- [X](https://twitter.com/intent/tweet?text=I%20just%20used%20%40coderabbitai%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20the%20proprietary%20code.%20Check%20it%20out%3A&url=https%3A//coderabbit.ai)
- [Mastodon](https://mastodon.social/share?text=I%20just%20used%20%40coderabbitai%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20the%20proprietary%20code.%20Check%20it%20out%3A%20https%3A%2F%2Fcoderabbit.ai)
- [Reddit](https://www.reddit.com/submit?title=Great%20tool%20for%20code%20review%20-%20CodeRabbit&text=I%20just%20used%20CodeRabbit%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20proprietary%20code.%20Check%20it%20out%3A%20https%3A//coderabbit.ai)
- [LinkedIn](https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fcoderabbit.ai&mini=true&title=Great%20tool%20for%20code%20review%20-%20CodeRabbit&summary=I%20just%20used%20CodeRabbit%20for%20my%20code%20review%2C%20and%20it%27s%20fantastic%21%20It%27s%20free%20for%20OSS%20and%20offers%20a%20free%20trial%20for%20proprietary%20code)

</details>

<details>
<summary>Tips</summary>

### Chat

There are 3 ways to chat with [CodeRabbit](https://coderabbit.ai):

- Review comments: Directly reply to a review comment made by CodeRabbit. Example:
	- `I pushed a fix in commit <commit_id>.`
	- `Generate unit testing code for this file.`
	- `Open a follow-up GitHub issue for this discussion.`
- Files and specific lines of code (under the "Files changed" tab): Tag `@coderabbitai` in a new review comment at the desired location with your query. Examples:
	- `@coderabbitai generate unit testing code for this file.`
	-	`@coderabbitai modularize this function.`
- PR comments: Tag `@coderabbitai` in a new PR comment to ask questions about the PR branch. For the best results, please provide a very specific query, as very limited context is provided in this mode. Examples:
	- `@coderabbitai generate interesting stats about this repository and render them as a table.`
	- `@coderabbitai show all the console.log statements in this repository.`
	- `@coderabbitai read src/utils.ts and generate unit testing code.`
	- `@coderabbitai read the files in the src/scheduler package and generate a class diagram using mermaid and a README in the markdown format.`
	- `@coderabbitai help me debug CodeRabbit configuration file.`

Note: Be mindful of the bot's finite context window. It's strongly recommended to break down tasks such as reading entire modules into smaller chunks. For a focused discussion, use review comments to chat about specific files and their changes, instead of using the PR comments.

### CodeRabbit Commands (invoked as PR comments)

- `@coderabbitai pause` to pause the reviews on a PR.
- `@coderabbitai resume` to resume the paused reviews.
- `@coderabbitai review` to trigger an incremental review. This is useful when automatic reviews are disabled for the repository.
- `@coderabbitai full review` to do a full review from scratch and review all the files again.
- `@coderabbitai summary` to regenerate the summary of the PR.
- `@coderabbitai resolve` resolve all the CodeRabbit review comments.
- `@coderabbitai configuration` to show the current CodeRabbit configuration for the repository.
- `@coderabbitai help` to get help.


Additionally, you can add `@coderabbitai ignore` anywhere in the PR description to prevent this PR from being reviewed.

### CodeRabbit Configration File (`.coderabbit.yaml`)

- You can programmatically configure CodeRabbit by adding a `.coderabbit.yaml` file to the root of your repository.
- Please see the [configuration documentation](https://docs.coderabbit.ai/guides/configure-coderabbit) for more information.
- If your editor has YAML language server enabled, you can add the path at the top of this file to enable auto-completion and validation: `# yaml-language-server: $schema=https://coderabbit.ai/integrations/schema.v2.json`

### Documentation and Community

- Visit our [Documentation](https://coderabbit.ai/docs) for detailed information on how to use CodeRabbit.
- Join our [Discord Community](https://discord.com/invite/GsXnASn26c) to get help, request features, and share feedback.
- Follow us on [X/Twitter](https://twitter.com/coderabbitai) for updates and announcements.

</details>

<!-- tips_end -->\n

Files Changed:
- .changeset/clever-gifts-joke.md (added, 7 changes)\n  Patch: @@ -0,0 +1,7 @@
+---
+"@nextui-org/popover": patch
+"@nextui-org/autocomplete": patch
+"@nextui-org/aria-utils": patch
+---
+
+Fix popover focus issue (#3171, #2992)\n- .changeset/cold-peas-dream.md (added, 6 changes)\n  Patch: @@ -0,0 +1,6 @@
+---
+"@nextui-org/modal": patch
+"@nextui-org/popover": patch
+---
+
+remove `disableFocusManagement` from Overlay\n- .changeset/metal-clocks-yawn.md (added, 50 changes)\n  Patch: @@ -0,0 +1,50 @@
+---
+"@nextui-org/accordion": patch
+"@nextui-org/autocomplete": patch
+"@nextui-org/avatar": patch
+"@nextui-org/breadcrumbs": patch
+"@nextui-org/button": patch
+"@nextui-org/calendar": patch
+"@nextui-org/card": patch
+"@nextui-org/checkbox": patch
+"@nextui-org/chip": patch
+"@nextui-org/date-input": patch
+"@nextui-org/date-picker": patch
+"@nextui-org/dropdown": patch
+"@nextui-org/input": patch
+"@nextui-org/kbd": patch
+"@nextui-org/link": patch
+"@nextui-org/listbox": patch
+"@nextui-org/menu": patch
+"@nextui-org/modal": patch
+"@nextui-org/navbar": patch
+"@nextui-org/pagination": patch
+"@nextui-org/popover": patch
+"@nextui-org/progress": patch
+"@nextui-org/radio": patch
+"@nextui-org/select": patch
+"@nextui-org/slider": patch
+"@nextui-org/snippet": patch
+"@nextui-org/switch": patch
+"@nextui-org/table": patch
+"@nextui-org/tabs": patch
+"@nextui-org/tooltip": patch
+"@nextui-org/user": patch
+"@nextui-org/react": patch
+"@nextui-org/system": patch
+"@nextui-org/use-aria-accordion": patch
+"@nextui-org/use-aria-accordion-item": patch
+"@nextui-org/use-aria-button": patch
+"@nextui-org/use-aria-link": patch
+"@nextui-org/use-aria-menu": patch
+"@nextui-org/use-aria-modal-overlay": patch
+"@nextui-org/use-aria-multiselect": patch
+"@nextui-org/use-aria-toggle-button": patch
+"@nextui-org/use-disclosure": patch
+"@nextui-org/use-intersection-observer": patch
+"@nextui-org/use-is-mobile": patch
+"@nextui-org/use-pagination": patch
+"@nextui-org/aria-utils": patch
+---
+
+bump react-aria dependencies\n- apps/docs/app/examples/autocomplete/fully-controlled/page.tsx (modified, 2 changes)\n  Patch: @@ -53,7 +53,7 @@ export default function Page() {
 
   // Specify how each of the Autocomplete values should change when an
   // option is selected from the list box
-  const onSelectionChange = (key: React.Key) => {
+  const onSelectionChange = (key: React.Key | null) => {
     setFieldState((prevState) => {
       let selectedItem = prevState.items.find((option) => option.value === key);
 \n- apps/docs/package.json (modified, 18 changes)\n  Patch: @@ -37,17 +37,17 @@
     "@nextui-org/use-infinite-scroll": "workspace:*",
     "@nextui-org/use-is-mobile": "workspace:*",
     "@radix-ui/react-scroll-area": "^1.0.5",
-    "@react-aria/focus": "^3.16.2",
+    "@react-aria/focus": "3.17.1",
     "@react-aria/i18n": "^3.10.2",
-    "@react-aria/interactions": "^3.21.1",
-    "@react-aria/selection": "^3.17.5",
-    "@react-aria/ssr": "^3.9.2",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/selection": "3.18.1",
+    "@react-aria/ssr": "3.9.4",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/virtualizer": "^3.9.10",
-    "@react-aria/visually-hidden": "^3.8.10",
-    "@react-stately/data": "^3.11.2",
-    "@react-stately/layout": "^3.13.7",
-    "@react-stately/tree": "^3.7.6",
+    "@react-aria/virtualizer": "3.10.1",
+    "@react-aria/visually-hidden": "3.8.12",
+    "@react-stately/data": "3.11.4",
+    "@react-stately/layout": "3.13.9",
+    "@react-stately/tree": "3.8.1",
     "@rehooks/local-storage": "^2.4.5",
     "@vercel/analytics": "^1.2.2",
     "canvas-confetti": "^1.9.2",\n- packages/components/accordion/package.json (modified, 10 changes)\n  Patch: @@ -54,12 +54,12 @@
     "@nextui-org/framer-utils": "workspace:*",
     "@nextui-org/divider": "workspace:*",
     "@nextui-org/use-aria-accordion": "workspace:*",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/focus": "3.16.2",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/focus": "3.17.1",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/tree": "3.7.6",
-    "@react-aria/button": "3.9.3",
-    "@react-types/accordion": "3.0.0-alpha.19",
+    "@react-stately/tree": "3.8.1",
+    "@react-aria/button": "3.9.5",
+    "@react-types/accordion": "3.0.0-alpha.21",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {\n- packages/components/autocomplete/__tests__/autocomplete.test.tsx (modified, 8 changes)\n  Patch: @@ -165,7 +165,7 @@ describe("Autocomplete", () => {
     // assert that the autocomplete listbox is open
     expect(autocomplete).toHaveAttribute("aria-expanded", "true");
 
-    // assert that input is focused
+    // assert that the autocomplete input is focused
     expect(autocomplete).toHaveFocus();
   });
 
@@ -355,8 +355,8 @@ describe("Autocomplete", () => {
     // assert that the autocomplete listbox is closed
     expect(autocomplete).toHaveAttribute("aria-expanded", "false");
 
-    // assert that input is not focused
-    expect(autocomplete).not.toHaveFocus();
+    // assert that input is focused
+    expect(autocomplete).toHaveFocus();
   });
 
   it("should set the input after selection", async () => {
@@ -529,7 +529,7 @@ describe("Autocomplete", () => {
           <form data-testid="form">
             <AutocompleteExample
               defaultInputValue="Penguin"
-              validate={(v) => (v === "Penguin" ? "Invalid value" : null)}
+              validate={(v) => (v.inputValue === "Penguin" ? "Invalid value" : null)}
               validationBehavior="aria"
             />
           </form>,\n- packages/components/autocomplete/package.json (modified, 16 changes)\n  Patch: @@ -53,14 +53,14 @@
     "@nextui-org/use-aria-button": "workspace:*",
     "@nextui-org/shared-icons": "workspace:*",
     "@nextui-org/use-safe-layout-effect": "workspace:*",
-    "@react-aria/combobox": "3.8.4",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/i18n": "3.10.2",
-    "@react-aria/interactions": "3.21.1",
+    "@react-aria/combobox": "3.9.1",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/i18n": "3.11.1",
+    "@react-aria/interactions": "3.21.3",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/visually-hidden": "3.8.10",
-    "@react-stately/combobox": "3.8.2",
-    "@react-types/combobox": "3.10.1",
+    "@react-aria/visually-hidden": "3.8.12",
+    "@react-stately/combobox": "3.8.4",
+    "@react-types/combobox": "3.11.1",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {
@@ -70,7 +70,7 @@
     "@nextui-org/chip": "workspace:*",
     "@nextui-org/stories-utils": "workspace:*",
     "@nextui-org/use-infinite-scroll": "workspace:*",
-    "@react-stately/data": "3.11.2",
+    "@react-stately/data": "3.11.4",
     "framer-motion": "^11.0.28",
     "clean-package": "2.2.0",
     "react": "^18.0.0",\n- packages/components/autocomplete/src/use-autocomplete.ts (modified, 30 changes)\n  Patch: @@ -202,9 +202,6 @@ export function useAutocomplete<T extends object>(originalProps: UseAutocomplete
   const inputRef = useDOMRef<HTMLInputElement>(ref);
   const scrollShadowRef = useDOMRef<HTMLElement>(scrollRefProp);
 
-  // control the input focus behaviours internally
-  const shouldFocus = useRef(false);
-
   const {
     buttonProps,
     inputProps,
@@ -320,26 +317,22 @@ export function useAutocomplete<T extends object>(originalProps: UseAutocomplete
     }
   }, [inputRef.current]);
 
-  // apply the same with to the popover as the select
   useEffect(() => {
-    if (isOpen && popoverRef.current && inputWrapperRef.current) {
-      let rect = inputWrapperRef.current.getBoundingClientRect();
+    // set input focus
+    if (isOpen) {
+      onFocus(true);
+
+      // apply the same with to the popover as the select
+      if (popoverRef.current && inputWrapperRef.current) {
+        let rect = inputWrapperRef.current.getBoundingClientRect();
 
-      let popover = popoverRef.current;
+        let popover = popoverRef.current;
 
-      popover.style.width = rect.width + "px";
+        popover.style.width = rect.width + "px";
+      }
     }
   }, [isOpen]);
 
-  // react aria has different focus strategies internally
-  // hence, handle focus behaviours on our side for better flexibilty
-  useEffect(() => {
-    const action = shouldFocus.current || isOpen ? "focus" : "blur";
-
-    inputRef?.current?.[action]();
-    if (action === "blur") shouldFocus.current = false;
-  }, [shouldFocus.current, isOpen]);
-
   // to prevent the error message:
   // stopPropagation is now the default behavior for events in React Spectrum.
   // You can use continuePropagation() to revert this behavior.
@@ -466,8 +459,7 @@ export function useAutocomplete<T extends object>(originalProps: UseAutocomplete
       },
       shouldCloseOnInteractOutside: popoverProps?.shouldCloseOnInteractOutside
         ? popoverProps.shouldCloseOnInteractOutside
-        : (element: Element) =>
-            ariaShouldCloseOnInteractOutside(element, inputWrapperRef, state, shouldFocus),
+        : (element: Element) => ariaShouldCloseOnInteractOutside(element, inputWrapperRef, state),
     } as unknown as PopoverProps;
   };
 \n- packages/components/avatar/package.json (modified, 6 changes)\n  Patch: @@ -43,9 +43,9 @@
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/use-image": "workspace:*",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/utils": "3.23.2"
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/utils": "3.24.1"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/breadcrumbs/package.json (modified, 6 changes)\n  Patch: @@ -43,10 +43,10 @@
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/shared-icons": "workspace:*",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/breadcrumbs": "3.5.11",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/breadcrumbs": "3.5.13",
     "@react-aria/utils": "3.24.1",
-    "@react-types/breadcrumbs": "3.7.3",
+    "@react-types/breadcrumbs": "3.7.5",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {\n- packages/components/button/package.json (modified, 8 changes)\n  Patch: @@ -46,12 +46,12 @@
     "@nextui-org/use-aria-button": "workspace:*",
     "@nextui-org/ripple": "workspace:*",
     "@nextui-org/spinner": "workspace:*",
-    "@react-aria/button": "3.9.3",
-    "@react-aria/interactions": "3.21.1",
+    "@react-aria/button": "3.9.5",
+    "@react-aria/interactions": "3.21.3",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/focus": "3.16.2",
+    "@react-aria/focus": "3.17.1",
     "@react-types/shared": "3.23.1",
-    "@react-types/button": "3.9.2"
+    "@react-types/button": "3.9.4"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/calendar/package.json (modified, 18 changes)\n  Patch: @@ -48,16 +48,16 @@
     "@nextui-org/button": "workspace:*",
     "lodash.debounce": "^4.0.8",
     "@internationalized/date": "^3.5.4",
-    "@react-aria/calendar": "3.5.6",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/i18n": "3.10.2",
-    "@react-stately/calendar": "3.4.4",
-    "@react-types/button": "3.9.2",
-    "@react-aria/visually-hidden": "3.8.10",
+    "@react-aria/calendar": "3.5.8",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/i18n": "3.11.1",
+    "@react-stately/calendar": "3.5.1",
+    "@react-types/button": "3.9.4",
+    "@react-aria/visually-hidden": "3.8.12",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/utils": "3.9.1",
-    "@react-types/calendar": "3.4.4",
-    "@react-aria/interactions": "3.21.1",
+    "@react-stately/utils": "3.10.1",
+    "@react-types/calendar": "3.4.6",
+    "@react-aria/interactions": "3.21.3",
     "@react-types/shared": "3.23.1",
     "scroll-into-view-if-needed": "3.0.10",
     "@types/lodash.debounce": "^4.0.7"\n- packages/components/card/package.json (modified, 6 changes)\n  Patch: @@ -45,10 +45,10 @@
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/use-aria-button": "workspace:*",
     "@nextui-org/ripple": "workspace:*",
-    "@react-aria/focus": "3.16.2",
+    "@react-aria/focus": "3.17.1",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/button": "3.9.3",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/button": "3.9.5",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {\n- packages/components/checkbox/package.json (modified, 14 changes)\n  Patch: @@ -44,14 +44,14 @@
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/use-callback-ref": "workspace:*",
     "@nextui-org/use-safe-layout-effect": "workspace:*",
-    "@react-aria/checkbox": "3.14.1",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
+    "@react-aria/checkbox": "3.14.3",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/visually-hidden": "3.8.10",
-    "@react-stately/checkbox": "3.6.3",
-    "@react-stately/toggle": "3.7.2",
-    "@react-types/checkbox": "3.7.1",
+    "@react-aria/visually-hidden": "3.8.12",
+    "@react-stately/checkbox": "3.6.5",
+    "@react-stately/toggle": "3.7.4",
+    "@react-types/checkbox": "3.8.1",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {\n- packages/components/chip/package.json (modified, 6 changes)\n  Patch: @@ -43,10 +43,10 @@
     "@nextui-org/shared-icons": "workspace:*",
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/react-utils": "workspace:*",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
     "@react-aria/utils": "3.24.1",
-    "@react-types/checkbox": "3.7.1"
+    "@react-types/checkbox": "3.8.1"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/date-input/package.json (modified, 10 changes)\n  Patch: @@ -43,12 +43,12 @@
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/shared-utils": "workspace:*",
     "@internationalized/date": "^3.5.4",
-    "@react-aria/datepicker": "3.9.3",
-    "@react-aria/i18n": "3.10.2",
-    "@react-stately/datepicker": "3.9.2",
-    "@react-types/datepicker": "3.7.2",
+    "@react-aria/datepicker": "3.10.1",
+    "@react-aria/i18n": "3.11.1",
+    "@react-stately/datepicker": "3.9.4",
+    "@react-types/datepicker": "3.7.4",
     "@react-types/shared": "3.23.1",
-    "@react-aria/utils": "3.23.2"
+    "@react-aria/utils": "3.24.1"
   },
   "devDependencies": {
     "@nextui-org/system": "workspace:*",\n- packages/components/date-input/src/use-date-input.ts (modified, 1 changes)\n  Patch: @@ -155,7 +155,6 @@ export function useDateInput<T extends DateValue>(originalProps: UseDateInputPro
     minValue,
     maxValue,
     validationBehavior,
-    isInvalid: isInvalidProp,
     shouldForceLeadingZeros,
     createCalendar:
       !createCalendarProp || typeof createCalendarProp !== "function"\n- packages/components/date-picker/package.json (modified, 14 changes)\n  Patch: @@ -48,15 +48,15 @@
     "@nextui-org/date-input": "workspace:*",
     "@nextui-org/shared-icons": "workspace:*",
     "@nextui-org/aria-utils": "workspace:*",
-    "@react-stately/overlays": "3.6.5",
-    "@react-stately/utils": "3.9.1",
+    "@react-stately/overlays": "3.6.7",
+    "@react-stately/utils": "3.10.1",
     "@internationalized/date": "^3.5.4",
-    "@react-aria/datepicker": "3.9.3",
-    "@react-aria/i18n": "3.10.2",
-    "@react-stately/datepicker": "3.9.2",
-    "@react-types/datepicker": "3.7.2",
+    "@react-aria/datepicker": "3.10.1",
+    "@react-aria/i18n": "3.11.1",
+    "@react-stately/datepicker": "3.9.4",
+    "@react-types/datepicker": "3.7.4",
     "@react-types/shared": "3.23.1",
-    "@react-aria/utils": "3.23.2"
+    "@react-aria/utils": "3.24.1"
   },
   "devDependencies": {
     "@nextui-org/system": "workspace:*",\n- packages/components/dropdown/__tests__/dropdown.test.tsx (modified, 118 changes)\n  Patch: @@ -667,7 +667,7 @@ describe("Keyboard interactions", () => {
 
     expect(triggerButton).toHaveFocus();
 
-    fireEvent.keyDown(triggerButton, {key: " ", charCode: keyCodes.Space});
+    fireEvent.keyDown(triggerButton, {key: " ", charCode: keyCodes[" "]});
 
     let menu = wrapper.queryByRole("menu");
 
@@ -679,4 +679,120 @@ describe("Keyboard interactions", () => {
 
     expect(menuItems[0]).toHaveFocus();
   });
+
+  it("should press the item on keyDown (Enter)", async () => {
+    const user = userEvent.setup();
+
+    const logSpy = jest.spyOn(console, "log").mockImplementation(() => {});
+
+    const wrapper = render(
+      <Dropdown>
+        <DropdownTrigger>
+          <Button data-testid="trigger-test">Trigger</Button>
+        </DropdownTrigger>
+        <DropdownMenu aria-label="Actions" selectionMode="single">
+          <DropdownItem
+            key="new"
+            onPress={() => {
+              /* eslint-disable no-console */
+              console.log("ENTER");
+            }}
+          >
+            New file
+          </DropdownItem>
+          <DropdownItem key="copy">Copy link</DropdownItem>
+          <DropdownItem key="edit">Edit file</DropdownItem>
+          <DropdownItem key="delete" color="danger">
+            Delete file
+          </DropdownItem>
+        </DropdownMenu>
+      </Dropdown>,
+    );
+
+    let triggerButton = wrapper.getByTestId("trigger-test");
+
+    act(() => {
+      triggerButton.focus();
+    });
+
+    expect(triggerButton).toHaveFocus();
+
+    fireEvent.keyDown(triggerButton, {key: "Enter", charCode: keyCodes.Enter});
+
+    let menu = wrapper.queryByRole("menu");
+
+    expect(menu).toBeTruthy();
+
+    let menuItems = wrapper.getAllByRole("menuitemradio");
+
+    expect(menuItems.length).toBe(4);
+
+    expect(menuItems[0]).toHaveFocus();
+
+    await act(async () => {
+      await user.keyboard("[Enter]");
+    });
+
+    expect(logSpy).toHaveBeenCalledWith("ENTER");
+
+    logSpy.mockRestore();
+  });
+
+  it("should press the item on keyDown (Space)", async () => {
+    const user = userEvent.setup();
+
+    const logSpy = jest.spyOn(console, "log").mockImplementation(() => {});
+
+    const wrapper = render(
+      <Dropdown>
+        <DropdownTrigger>
+          <Button data-testid="trigger-test">Trigger</Button>
+        </DropdownTrigger>
+        <DropdownMenu aria-label="Actions" selectionMode="single">
+          <DropdownItem
+            key="new"
+            onPress={() => {
+              /* eslint-disable no-console */
+              console.log("SPACE");
+            }}
+          >
+            New file
+          </DropdownItem>
+          <DropdownItem key="copy">Copy link</DropdownItem>
+          <DropdownItem key="edit">Edit file</DropdownItem>
+          <DropdownItem key="delete" color="danger">
+            Delete file
+          </DropdownItem>
+        </DropdownMenu>
+      </Dropdown>,
+    );
+
+    let triggerButton = wrapper.getByTestId("trigger-test");
+
+    act(() => {
+      triggerButton.focus();
+    });
+
+    expect(triggerButton).toHaveFocus();
+
+    fireEvent.keyDown(triggerButton, {key: "Enter", charCode: keyCodes.Enter});
+
+    let menu = wrapper.queryByRole("menu");
+
+    expect(menu).toBeTruthy();
+
+    let menuItems = wrapper.getAllByRole("menuitemradio");
+
+    expect(menuItems.length).toBe(4);
+
+    expect(menuItems[0]).toHaveFocus();
+
+    await act(async () => {
+      await user.keyboard("[Space]");
+    });
+
+    expect(logSpy).toHaveBeenCalledWith("SPACE");
+
+    logSpy.mockRestore();
+  });
 });\n- packages/components/dropdown/package.json (modified, 8 changes)\n  Patch: @@ -46,11 +46,11 @@
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/aria-utils": "workspace:*",
-    "@react-aria/menu": "3.13.1",
+    "@react-aria/menu": "3.14.1",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/menu": "3.6.1",
-    "@react-aria/focus": "3.16.2",
-    "@react-types/menu": "3.9.7"
+    "@react-stately/menu": "3.7.1",
+    "@react-aria/focus": "3.17.1",
+    "@react-types/menu": "3.9.9"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/input/package.json (modified, 10 changes)\n  Patch: @@ -44,13 +44,13 @@
     "@nextui-org/shared-icons": "workspace:*",
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/use-safe-layout-effect": "workspace:*",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/textfield": "3.14.3",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/textfield": "3.14.5",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/utils": "3.9.1",
+    "@react-stately/utils": "3.10.1",
     "@react-types/shared": "3.23.1",
-    "@react-types/textfield": "3.9.1",
+    "@react-types/textfield": "3.9.3",
     "react-textarea-autosize": "^8.5.3"
   },
   "devDependencies": {\n- packages/components/kbd/package.json (modified, 2 changes)\n  Patch: @@ -42,7 +42,7 @@
     "@nextui-org/system-rsc": "workspace:*",
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/react-utils": "workspace:*",
-    "@react-aria/utils": "3.23.2"
+    "@react-aria/utils": "3.24.1"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/link/package.json (modified, 4 changes)\n  Patch: @@ -46,8 +46,8 @@
     "@nextui-org/use-aria-link": "workspace:*",
     "@react-aria/link": "3.7.1",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/focus": "3.16.2",
-    "@react-types/link": "3.5.3"
+    "@react-aria/focus": "3.17.1",
+    "@react-types/link": "3.5.5"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/listbox/package.json (modified, 10 changes)\n  Patch: @@ -46,11 +46,11 @@
     "@nextui-org/aria-utils": "workspace:*",
     "@nextui-org/use-is-mobile": "workspace:*",
     "@react-aria/utils": "3.24.1",
-    "@react-aria/listbox": "3.11.5",
-    "@react-stately/list": "3.10.3",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
-    "@react-types/menu": "3.9.7",
+    "@react-aria/listbox": "3.12.1",
+    "@react-stately/list": "3.10.5",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
+    "@react-types/menu": "3.9.9",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {\n- packages/components/menu/package.json (modified, 12 changes)\n  Patch: @@ -46,13 +46,13 @@
     "@nextui-org/shared-utils": "workspace:*",
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/use-aria-menu": "workspace:*",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/menu": "3.13.1",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/menu": "3.14.1",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/menu": "3.6.1",
-    "@react-stately/tree": "3.7.6",
-    "@react-types/menu": "3.9.7",
+    "@react-stately/menu": "3.7.1",
+    "@react-stately/tree": "3.8.1",
+    "@react-types/menu": "3.9.9",
     "@react-types/shared": "3.23.1"
   },
   "devDependencies": {\n- packages/components/modal/package.json (modified, 12 changes)\n  Patch: @@ -48,13 +48,13 @@
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/shared-icons": "workspace:*",
     "@nextui-org/use-aria-modal-overlay": "workspace:*",
-    "@react-aria/dialog": "3.5.12",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/overlays": "3.21.1",
+    "@react-aria/dialog": "3.5.14",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/overlays": "3.22.1",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/overlays": "3.6.5",
-    "@react-types/overlays": "3.8.5"
+    "@react-stately/overlays": "3.6.7",
+    "@react-types/overlays": "3.8.7"
   },
   "devDependencies": {
     "@nextui-org/theme": "workspace:*",\n- packages/components/modal/src/modal.tsx (modified, 6 changes)\n  Patch: @@ -17,11 +17,7 @@ const Modal = forwardRef<"div", ModalProps>((props, ref) => {
   const {children, ...otherProps} = props;
   const context = useModal({...otherProps, ref});
 
-  const overlay = (
-    <Overlay disableFocusManagement portalContainer={context.portalContainer}>
-      {children}
-    </Overlay>
-  );
+  const overlay = <Overlay portalContainer={context.portalContainer}>{children}</Overlay>;
 
   return (
     <ModalProvider value={context}>\n- packages/components/navbar/package.json (modified, 10 changes)\n  Patch: @@ -46,12 +46,12 @@
     "@nextui-org/framer-utils": "workspace:*",
     "@nextui-org/use-aria-toggle-button": "workspace:*",
     "@nextui-org/use-scroll-position": "workspace:*",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/interactions": "3.21.1",
-    "@react-aria/overlays": "3.21.1",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/interactions": "3.21.3",
+    "@react-aria/overlays": "3.22.1",
     "@react-aria/utils": "3.24.1",
-    "@react-stately/toggle": "3.7.2",
-    "@react-stately/utils": "3.9.1",
+    "@react-stately/toggle": "3.7.4",
+    "@react-stately/utils": "3.10.1",
     "react-remove-scroll": "^2.5.6"
   },
   "devDependencies": {\n- packages/components/pagination/package.json (modified, 6 changes)\n  Patch: @@ -44,9 +44,9 @@
     "@nextui-org/react-utils": "workspace:*",
     "@nextui-org/shared-icons": "workspace:*",
     "@nextui-org/use-pagination": "workspace:*",
-    "@react-aria/focus": "3.16.2",
-    "@react-aria/i18n": "3.10.2",
-    "@react-aria/interactions": "3.21.1",
+    "@react-aria/focus": "3.17.1",
+    "@react-aria/i18n": "3.11.1",
+    "@react-aria/interactions": "3.21.3",
     "@react-aria/utils": "3.24.1",
     "scroll-into-view-if-needed": "3.0.10"
   },\n